---
name: archery-sport
description: 为开发射箭记录App提供专业知识支持，包含射箭运动规则（反曲弓、复合弓、传统弓、猎弓）、靶面计分标准、比赛规则，以及成绩分析方法（平均分、环数分布、稳定性、进步趋势）。适用于Flutter App开发、射箭数据分析、技术指导等场景。
---

# 射箭运动与App开发 Skill

## 概述
本skill为开发射箭记录App提供专业知识支持，包含射箭运动规则、计分标准、成绩分析方法，以及App功能实现指导。

---

## 第一部分：射箭App功能架构

### 目标用户
- 业余射箭爱好者
- 专业射箭运动员

### 技术栈
- **框架**: Flutter
- **平台**: 跨平台（iOS & Android）

### 核心功能模块

#### 1. 首页（成绩列表页）
**功能描述**：
- 展示用户过往所有已完成的射箭记录
- 列表项应包含的关键信息：
  - 记录日期和时间
  - 总分和环数
  - 弓种类型（反曲弓/复合弓/传统弓/猎弓）
  - 距离（5米/10米/18米/70米等）
  - 箭数和组数
  - 快速预览图标或缩略图

**实现建议**：
- 使用ListView.builder实现高性能列表
- 支持下拉刷新和上拉加载更多
- 提供排序选项（按日期、按分数）
- 添加搜索和筛选功能（按弓种、距离、日期范围）
- 列表项点击跳转到成绩详情页

#### 2. 成绩详情页
**功能描述**：
- 展示单次射箭记录的完整详细信息
- 应包含的内容：
  - 基本信息：日期、时间、地点、天气
  - 装备信息：弓种、箭支型号、瞄具类型
  - 射箭参数：距离、靶面尺寸、总箭数
  - 详细成绩：每组、每箭的环数
  - 统计数据：总分、平均分、最高/最低环数
  - 环数分布图表
  - 靶面击中点位可视化（如果记录了坐标）
  - 备注和心得

**实现建议**：
- 使用ScrollView组合多个Widget
- 集成图表库（如fl_chart）展示数据
- 支持成绩编辑和删除
- 支持分享功能（截图或导出PDF）

#### 3. 成绩分析页面
**功能描述**：
- 基于历史数据进行多维度专业分析
- 分析维度参见"第四部分：成绩分析方法"

**实现建议**：
- 使用Tab或分段控制器切换不同分析维度
- 集成图表库展示趋势图、分布图、雷达图
- 支持时间范围筛选
- 支持按弓种、距离分组对比
- 提供数据导出功能

#### 4. 成绩记录流程

##### 4.1 成绩记录准备页面
**功能描述**：
- 用户设置本次射箭的各项参数
- 必填项：
  - 弓种选择（反曲弓/复合弓/传统弓/猎弓）
  - 距离选择（5米/10米/18米/30米/50米/70米/90米/自定义）
  - 靶面规格（40cm/60cm/80cm/122cm）
  - 总箭数和每组箭数（如6箭一组，共6组）
- 可选项：
  - 比赛类型（训练/比赛/测试）
  - 地点
  - 天气条件
  - 装备备注
  - 训练目标

**实现建议**：
- 使用Form表单组件
- 提供常用配置的快速选择模板
- 保存用户最近使用的配置
- 参数验证和提示
- "开始记录"按钮跳转到记录页面

##### 4.2 成绩记录页面
**功能描述**：
- 用户实时录入每箭的成绩
- 两种录入方式：
  1. **数字键盘输入**：直接输入环数（0-10或X）
  2. **靶面点击输入**：在可视化靶面上点击击中位置，自动计算环数

**关键元素**：
- 当前组数和箭数显示
- 当前组成绩实时累计
- 总分实时更新
- 已完成组的成绩展示
- 撤销上一箭功能
- 暂停/继续功能
- 完成记录按钮

**实现建议**：
- 使用StatefulWidget管理状态
- 数字键盘：自定义GridView布局（0-10，X，M，删除）
- 靶面输入：使用CustomPaint绘制靶面，GestureDetector捕获点击
- 根据点击坐标计算环数（参见"第二部分：靶面规则"）
- 实时保存数据，防止意外退出丢失
- 完成后返回首页并刷新列表

---

## 第二部分：射箭运动规则

### 弓种类型

#### 1. 反曲弓（Recurve Bow）
- 奥运会正式比赛项目
- 弓片两端向外弯曲
- 可使用瞄准器、稳定杆
- 适合精准射击

#### 2. 复合弓（Compound Bow）
- 使用滑轮系统
- 具有放松力功能
- 可配备瞄准镜、释放器
- 精准度最高

#### 3. 传统弓（Traditional Bow）
- 包括长弓、美式猎弓、亚洲传统弓
- 不使用瞄准器等辅助设备
- 强调本能瞄准

#### 4. 猎弓
- 通常指复合猎弓或传统猎弓
- 强调便携性和实用性

### 靶面规则

#### 标准靶面规格
根据世界射箭联合会（World Archery）规则：

**1. 室外靶面（122cm直径）**
- 用于70米、90米距离
- 10个环区，从外到内：1-10环
- 最内圈：10环（金色，直径12.2cm）
- 10环内圈：X环（内10环，直径6.1cm）
- 9环（金色，直径24.4cm）
- 8环（红色，直径36.6cm）
- 7环（红色，直径48.8cm）
- 6环（蓝色，直径61cm）
- 5环（蓝色，直径73.2cm）
- 4环（黑色，直径85.4cm）
- 3环（黑色，直径97.6cm）
- 2环（白色，直径109.8cm）
- 1环（白色，直径122cm）

**2. 室外靶面（80cm直径）**
- 用于50米距离
- 环区比例与122cm靶面相同

**3. 室内靶面（60cm直径）**
- 用于18米距离
- 仅有10环到5环（5个环区）
- 或完整10环（40cm三靶面）

**4. 室内靶面（40cm三靶面）**
- 用于18米距离
- 一张靶纸上有3个40cm靶面
- 每个靶面完整10环区

**5. 小型靶面（40cm单靶面）**
- 用于近距离训练（5米、10米）
- 完整10环区

#### 环数计分规则
1. **基本规则**：
   - 箭中在线上，计高环
   - 箭穿过靶面，按可见箭孔计分
   - 箭击中其他箭并留在靶上，按被击中箭的环数计分
   - 箭反弹或穿透靶面，按箭孔痕迹计分

2. **X环（内10环）**：
   - 在决胜局或需要分出名次时使用
   - X环数量多者排名靠前
   - 日常训练中X环按10环计分

3. **脱靶**：
   - 记为0环或M（Miss）

### 比赛形式与规则

#### 1. 个人排名赛（Ranking Round）
- **室外70米**：
  - 射72箭，分12组，每组6箭
  - 总分720环为满分
  - 用于确定淘汰赛种子排名

- **室内18米**：
  - 射60箭，分10组或20组
  - 总分600环为满分

#### 2. 个人淘汰赛（Individual Elimination）
- 采用一箭决胜制或累积分制
- 每组3箭或5箭
- 胜者晋级

#### 3. 计分方式
- **局分制**（Set System）：
  - 每3箭为一局
  - 高分者得2分，平局各得1分
  - 先得6分者获胜
  
- **累积分制**（Cumulative Scoring）：
  - 直接累计环数
  - 高分者获胜

### 射箭距离标准

| 比赛类型 | 距离选项 |
|---------|---------|
| 室外反曲弓 | 90米、70米、50米、30米 |
| 室外复合弓 | 50米 |
| 室内 | 18米、25米 |
| 训练 | 5米、10米、15米及以上任意距离 |

---

## 第三部分：射箭技术要点

### 射箭基本流程
1. **站位（Stance）**：开放式或闭合式站位
2. **搭箭（Nocking）**：将箭搭在弦上
3. **预拉（Set-up）**：举弓准备
4. **开弓（Draw）**：拉弦至固定锚点
5. **瞄准（Aiming）**：瞄准器对准目标
6. **撒放（Release）**：平稳释放弓弦
7. **跟随（Follow-through）**：保持姿势直到箭命中

### 常见技术问题
- **成绩不稳定**：检查锚点、撒放一致性
- **左右偏移**：检查站位、推弓、撒放
- **上下偏移**：检查瞄准器高度、力度控制
- **散布过大**：基础动作不稳定，需强化训练

---

## 第四部分：成绩分析方法

### 1. 基础统计指标

#### 平均分（Average Score）
- **计算方法**：总分 ÷ 总箭数
- **意义**：反映整体水平
- **参考标准**：
  - 初学者（18米）：平均5-6环
  - 中级（18米）：平均7-8环
  - 高级（18米）：平均8.5-9.5环
  - 专业（18米）：平均9.5环以上

#### 环数分布（Ring Distribution）
- **统计各环数出现次数**：
  - 10环（X环）：__ 次
  - 9环：__ 次
  - 8环：__ 次
  - 7环及以下：__ 次

- **可视化**：柱状图或饼图
- **意义**：
  - 高环集中度高：技术稳定
  - 分散：需要改善一致性

#### 总分趋势（Score Trend）
- **按时间轴展示每次训练/比赛的总分**
- **计算移动平均线**（如最近5次平均分）
- **意义**：直观看到进步或退步

### 2. 稳定性分析

#### 标准差（Standard Deviation）
- **计算方法**：
  ```
  标准差 = √(Σ(每箭环数 - 平均环数)² ÷ 总箭数)
  ```
- **意义**：
  - 标准差小（<1.5）：稳定性好
  - 标准差大（>2.5）：稳定性差，需强化基础

#### 组内一致性（Within-Group Consistency）
- **分析每组6箭的分数波动**
- **计算每组的标准差**
- **识别问题组**：标准差异常大的组

#### 首箭效应（First Arrow Effect）
- **统计每组第一箭与其他箭的平均分差异**
- **意义**：首箭明显低于其他箭，说明热身不足或心理紧张

### 3. 进步趋势分析

#### 时间序列分析
- **按周/月统计平均分变化**
- **计算增长率**：(本期平均分 - 上期平均分) ÷ 上期平均分 × 100%
- **设定目标对比**：实际分数 vs 目标分数

#### 分项进步
- **按距离分析**：不同距离的进步速度
- **按弓种分析**：不同弓的熟练程度
- **按环数分析**：高环数比例的提升

### 4. 高级分析

#### 击中点分布（Shot Grouping）
如果记录了箭的坐标位置：
- **计算重心位置**
- **计算散布半径**
- **绘制热力图**
- **分析偏移方向**（系统性偏上、偏左等）

#### 峰值表现（Peak Performance）
- **历史最高分**
- **最高平均环数**
- **最多连续10环**
- **最佳稳定性表现**

#### 环境因素影响
- **室内 vs 室外成绩对比**
- **不同天气条件下的表现**
- **不同时间段的表现**（早晨、下午、傍晚）

### 5. 可视化建议

#### 图表类型
1. **折线图**：总分趋势、平均分趋势
2. **柱状图**：环数分布、每组得分
3. **饼图**：环数占比
4. **雷达图**：多维度能力（稳定性、准确性、高环率等）
5. **散点图**：击中点分布
6. **热力图**：靶面击中密度

#### 关键指标仪表盘
- 总训练次数
- 总射箭数
- 最高分/平均分
- 本周/本月进步率
- 10环率、9环以上率

### 6. 成绩评估标准

#### 业余爱好者（18米，60箭）
- 入门：300-400分
- 初级：400-480分
- 中级：480-540分
- 高级：540-570分

#### 专业运动员（18米，60箭）
- 良好：570-585分
- 优秀：585-595分
- 顶尖：595-600分

#### 室外70米（72箭）
- 业余高级：550-620分
- 专业级：620-680分
- 顶尖：680-720分

---

## 第五部分：开发实现建议

### 数据模型设计

```dart
// 射箭记录模型
class ArcheryRecord {
  String id;
  DateTime dateTime;
  String bowType; // 反曲弓/复合弓/传统弓/猎弓
  int distance; // 距离（米）
  int targetSize; // 靶面尺寸（cm）
  int totalArrows; // 总箭数
  int arrowsPerEnd; // 每组箭数
  List<End> ends; // 各组成绩
  String location; // 地点
  String weather; // 天气
  String notes; // 备注
  
  // 计算属性
  int get totalScore => ends.fold(0, (sum, end) => sum + end.score);
  double get averageScore => totalScore / totalArrows;
  Map<int, int> get ringDistribution; // 环数分布
  double get standardDeviation; // 标准差
}

// 一组成绩
class End {
  List<int> arrows; // 每箭环数，10环可用11表示X环
  
  int get score => arrows.fold(0, (sum, arrow) => sum + arrow);
}

// 分析结果模型
class AnalysisResult {
  double averageScore;
  Map<int, int> ringDistribution;
  double standardDeviation;
  List<ScoreTrend> trends;
  double progressRate; // 进步率
  PeakPerformance peak;
}
```

### 状态管理建议
- 使用Provider或Riverpod管理全局状态
- 使用本地数据库（如sqflite、Hive）持久化数据
- 考虑云端同步功能

### 用户体验优化
- 快速录入：大号按钮，易于点击
- 实时反馈：分数实时更新
- 错误纠正：撤销功能
- 数据安全：自动保存、备份恢复
- 离线支持：无网络也可正常使用

---

## 第六部分：使用指南

### 当用户请求开发射箭App功能时
1. 参考"第一部分"的功能架构和实现建议
2. 使用Flutter最佳实践编写代码
3. 确保UI友好，适合运动场景使用
4. 实现"第五部分"的数据模型

### 当用户询问射箭规则时
1. 参考"第二部分"提供准确的规则说明
2. 根据用户的弓种和距离给出针对性信息
3. 解释计分方式和比赛规则

### 当用户需要成绩分析时
1. 参考"第四部分"的分析方法
2. 根据用户数据计算各项指标
3. 提供可视化建议和具体的改进建议
4. 对比标准给出水平评估

### 当用户需要技术指导时
1. 参考"第三部分"的技术要点
2. 根据成绩特征诊断可能的技术问题
3. 给出针对性的训练建议

---

## 附录：常用术语

- **End**: 一组箭（通常3箭或6箭）
- **Arrow**: 单支箭
- **Ring/Score**: 环数/分数
- **X ring**: 内10环
- **Miss (M)**: 脱靶
- **Perfect Score**: 满分（如18米60箭600分）
- **Grouping**: 箭的散布/分组
- **Anchor Point**: 锚点（拉弓时固定位置）
- **Release**: 撒放
- **Follow-through**: 跟随动作

---

## 更新日志
- v1.0 (2025-01-19): 初始版本，包含完整的射箭规则、App架构和分析方法
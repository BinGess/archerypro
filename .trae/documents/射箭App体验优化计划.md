# 功能与体验优化方案

根据你的反馈，我们将分五个部分对App进行优化。

## 1. 训练设置优化
**目标**：简化设置流程，移除不必要的“快速开始”，强化“记忆上次设置”功能。
*   **移除快速开始**：删除 `SessionSetupScreen` 顶部的“快速开始”区域。
*   **自动加载上次配置**：目前的 `_loadLastSettings` 逻辑已经实现了此功能，只需确保在进入页面时正确回显即可。

## 2. 射箭完成流程优化
**目标**：消除完成训练后的界面闪烁，实现平滑返回首页。
*   **优化跳转逻辑**：目前的实现是在 `ScoringScreen` 中监听 `isComplete` 状态，然后跳转。问题可能出在 `saveSession` 后立即触发了页面刷新或状态重置，导致中间态闪烁。
*   **方案**：调整 `ScoringNotifier.saveSession` 逻辑，确保保存动作完成后，不立即清空当前 Session 数据，而是等待 UI 跳转完成后再进行清理。或者在跳转时使用 `Navigator.popUntil` 直接回到首页，避免中间页面的渲染。

## 3. 图表修复
**目标**：修复历史和统计图表不显示趋势的问题。
*   **检查数据源**：确认 `ScoreTrendChart` 接收到的 `scores` 数据是否为空或格式不正确。
*   **检查图表配置**：`ScoreTrendChart` 目前设置了 `maxY: 10.5`，如果用于显示总分（例如 300分），曲线将超出范围不可见。
*   **方案**：使 `ScoreTrendChart` 的 Y 轴范围自适应数据最大值，或者根据传入的数据类型（平均分 vs 总分）动态调整配置。

## 4. 实时计分交互优化
**目标**：提升计分操作的便捷性和灵活性。
*   **动态输入框数量**：根据 `arrowsPerEnd` 设置，动态渲染输入框数量（目前是固定的）。
*   **修改历史成绩**：
    *   在 `ScoringScreen` 的历史列表（GridView）中，点击某一组时，将该组设为“编辑模式”。
    *   编辑模式下，输入键盘将更新该组的成绩，而不是追加新箭。
*   **"再来一组"功能**：在最后一组完成后，显示【再来一组】按钮，点击后增加 `maxEnds` 并进入下一组。
*   **统一输入框样式**：将靶面视图（Target View）下的输入框样式调整为与列表视图一致。

## 5. 训练详情页重构
**目标**：去除冗余信息，增加实用功能。
*   **UI 调整**：
    *   移除 "Regular Training" 大标题。
    *   重新布局顶部基础信息。
    *   保留总分、稳定性、AI建议。
*   **功能增强**：
    *   添加【编辑】和【删除】按钮。
    *   【编辑】功能：跳转回 `ScoringScreen`，并加载该 Session 数据进行修改。
    *   【删除】功能：弹出确认框，删除后返回首页。

***

**执行计划**：
1.  **修复图表**：优先解决数据不可见的问题，修改 `ScoreTrendChart` 以支持自适应 Y 轴。
2.  **优化训练设置**：移除快速开始。
3.  **优化完成流程**：调整 `ScoringProvider` 和 `ScoringScreen` 的保存跳转逻辑。
4.  **重构详情页**：修改 UI 布局，添加编辑/删除逻辑。
5.  **重构计分页面**：实现动态输入框、历史修改、再来一组等复杂交互。
